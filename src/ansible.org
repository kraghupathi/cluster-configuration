#+PROPERTY: session *scratch*
#+PROPERTY: results output
#+PROPERTY: tangle ../build/ansible.yml
#+PROPERTY: exports code


* Requirements
The functional and security requirements for Ansible server can be
listed as:

- *Functional Requirements*
+ Ansible server should manage itself.
+ Update OS, enforce firewall rules.

- *Security Requirements*
+ Firewall Rules.
+ SSH/Port 22 open.
+ Rate limiting on Port 22.
+ ICMP (Ping)
+ (i) and (ii) should be accessible from VLEAD IP range.


* Design




* Implementation
This script configures the ansible server according to the roles
given.

#+BEGIN_SRC YML
---
- name: Configure ansible server
  hosts: ansible-server
  roles:
    - common
    - ansible
#+END_SRC

Here, we are using two roles as follows:

- common: The configuration defined inside this, is common to all
  servers. The organization can be referred here.

- ansible: This configuration is specific to ansible server.  The
  organization of configuration inside these roles is as follows:
  + meta: This has =main.yml= and all the role dependencies are listed
    in this.
  + tasks: The =main.yml= inside this ensures that iptables for ansible
    server are included.
  + handlers: The =main.yml= inside handler notifies it what services
    need to be restarted, if that action(change) is performed.
